
<page
    [isLoading]="registerProcess.inProgress$"
    [notifications$]="notification$"
>
    <form
        (submit)="$event.preventDefault(); register()"
        data-testid="register-form"
    >
        <div class="input-group">
            <label>{{ 'username' | translate }}</label>
            <input
                [formControl]="form.controls.username" 
                type="text"
                name="username"
                data-testid="username-input" 
            >
            <p
                class="error"
                *ngIf="form.controls.username.errors 
                && !form.controls.username.errors?.['maxlength']"
                data-cy="error"
            >
                {{ 'register_username_error' | translate }}
            </p>
            <p 
               class="error"
               data-cy="max-length-error"
               *ngIf="form.controls.username.errors?.['maxlength']"
            >
              {{ 'INPUT_VALUE_TO_LONG' | translate }}
            </p>
        </div>
        <div class="input-group">
            <label>{{ 'password' | translate }}</label>
            <input 
                [formControl]="form.controls.password"
                type="password"
                name="password"
                data-testid="password-input"
            >
            <p
                class="error"
                *ngIf="form.controls.username.errors"
                data-cy="error"
            >
                {{ 'register_password_error' | translate }}
            </p>
        </div>
        <section>
            <customize-avatar
                [avatarColor]="form.controls.avatarColor"
                [avatarImage]="form.controls.avatarImage"
                [avatarName]="form.controls.username.value || ''"
                [avatarUrl]="form.controls.avatarUrl"
            ></customize-avatar>
        </section>
        <div class="input-group">
            <button
                type="submit"
                data-testid="register-button"
                [disabled]="!form.valid"
            >
                {{ 'register' | translate }}
            </button>
        </div>
    </form>
</page>